{% extends 'base.html' %}

{% block title %}Kindness Cards{% endblock %}

{% block content %}


 <div class="container all-kindness-wrapper" style="position: relative; overflow-y: scroll; height: 600px;">

    <a class="btn unread-cards btn-white"><strong>Show Unread Cards</strong></a>

       <div class="tabordion" style="width: 1195px; height: 600px; position: absolute;">   <!-- height added  -->

            {% for key, values in all.items %}

                <section>

                    <input type="radio" name="sections" id="option" checked>
                       <label for="option">{{ key }}</label>
                       <article>
                     <!--{% for v in values.messages %}-->
                        <!--<p class="received-kindness">{{v}}</p>-->
                     <!--{% endfor %}-->

                         <div class="container" style="position: relative;padding: 0;height: 680px;">
                             <div class="card-wrapper">
                                 <img class="rounded-circle account-img" src="{{ values.photo }}"
                                     onError="this.onerror=null;this.src='/media/profile_image/default.jpg';" style="height: 40px;width: 40px;align: left;">{{ key }}</img>

                                      <button class="kdns-btn read-button" type="button" onclick="openReadCard();" id="read-button" style="text-align: center;
                                      background-color: #FBEFEF; color: #000000; margin: 0 auto; margin-top: 15px; margin-bottom: -30px;">OPEN/CLOSE CARD</button>


 <div class="wrap kind-all-wrap" id="wrap"  style="background: white;">

   <div style="overflow-y: scroll; height: 510px; padding-right: 20px;">

       <div class="kindness-bg"></div>


   <span style="padding-left: 10px;">Hi,</span>

      <ul>
          <li>
            {% for v in values.messages  %}
                <!--<p>{{v}}</p>-->


               <p class="received-kindness"><span class="message-date">{{v.date}}</span>
                   <hr>{{v.body}}</p>
            {% endfor %}

            <u><i><label for="option" style="z-index:1;width: auto;background: transparent;border: none;float: right;">
                             <img class="rounded-circle account-img" src="{{ values.photo }}"
                             onError="this.onerror=null;this.src='/media/profile_image/default.jpg';" style="height: 35px; overflow-y: scroll; width: 35px; margin: 15px auto 0;">{{ key }}</label></i></u>
          </li>
  </ul>

  <div class="kindnessCardContainer kindnessCardAllContainer  card--front back" onclick="openReadCard();"></div>
  <div class="kindnessCardContainer kindnessCardAllContainer  card--front" onclick="openReadCard();"></div>

            </div>

    </div>
                             </div>    </div>     </article>
                   </section>
            {% endfor %}
        </div>
</div>


<div class="container kindness" style="position:relative;padding: 0;">

    <a class=" btn all-cards btn-white" ><strong>Show All My Cards</strong></a>
    <div class="card-wrapper">

      <form action="{% url 'mark_read' %}">
    <button class="kdns-btn read-button" type="button" onclick="openCard();" id="button" style="
    text-align: center;
    background-color: #FBEFEF;color: #000000;
     margin: 5px auto 0;
    /* margin-top: -30px; */
    ">OPEN CARD</button>

     </form>


     <div class="wrap kind-all-wrap" id="wrap1"  style="background: white; margin-top: -30px;">

    <div style="overflow-y: scroll; height:510px; padding-right: 20px;">

      <div class="kindness-bg"></div>

    <span style="padding-left: 10px;">Hi,</span>
      <div style="overflow-y:scroll"></div>
      <ul>
    {% if unread.items %}
        {% for name, message in unread.items %}
          <li>
            {% for v in message %}
                <p>{{v}}</p>
            {% endfor %}

            <u><i><label style="
              text-align: right;
          ">{{ name }}</label></i></u>
          </li>
        {% endfor %}
    {% else %}
  </ul>
        <h6><i>You have no new messages</i></h6>
{#        <img src="/static/images/heart.png">#}
    {% endif %}
  </div>

  <div class="kindnessCardContainer card--front back" onclick="openCard();"></div>
  <div class="kindnessCardContainer card--front" onclick="openCard();"></div>
  </div>
    </div>
</div>

<script>
function openReadCard() {
$('.card--inner')
   // .slimScroll({ height:'513px'});
//$(".kind-all-wrap").css('margin-left','33%');
$(".kind-all-wrap").toggleClass('move');  //.css('margin-top','1px');

  var allReadbutton = document.getElementsByClassName('read-button');
  if(allReadbutton.innerHTML == 'Open/Close Cards') {
      allReadbutton.type = 'button';
      allReadbutton.innerHTML = 'Close All Cards';
  } else if(allReadbutton.innerHTML = 'Close All Cards') {
//$(".kind-all-wrap").css('margin-left','0');
      allReadbutton.innerHTML = 'Open All Cards';
  } else {
        allReadbutton.innerHTML = 'Open All Cards';
  }
  var Readcards = document.querySelectorAll('.kindnessCardAllContainer');
  for(var i = 0; i < Readcards.length; i++) {
    Readcards[i].classList.toggle('open');
  }
}
function openCard() {
   $('.card--inner')
       //.slimScroll({ height:'513px' });
$(".kind-wrap").css('margin-left','33%');
  var button = document.getElementById('button');
  if(button.innerHTML == 'OPEN CARD') {
      button.type = 'button';
      button.innerHTML = 'CLOSE CARD';
      } else if(button.innerHTML = 'CLOSE CARD') {
$(".kind-wrap").css('margin-left','0');
      button.type = 'submit';
      button.innerHTML = 'OPEN CARD';
  } else {
        button.innerHTML = 'OPEN CARD';
  }
  var cards = document.querySelectorAll('.kindnessCardContainer');
  for(var i = 0; i < cards.length; i++) {
    cards[i].classList.toggle('open');
  }
}
</script>
{% endblock %}
