{% extends 'base.html' %}

{% block title %}Kindness Cards{% endblock %}

{% block content %}


<div class="container all-kindness-wrapper" style="position: relative;height: 720px;">
<a class=" btn unread-cards btn-pink ">Show Unread Cards</a>
        <div class="tabordion">
            {% for key, values in all.items %}

                <section>
                  <input type="radio" name="sections" id="option" checked>
                  <label for="option">{{ key }}</label>
                  <article>
                     <!--{% for v in values.messages %}-->
                        <!--<p class="received-kindness">{{v}}</p>-->
                     <!--{% endfor %}-->

<div class="container" style="position:relative;padding: 0;">
    <div class="card-wrapper">

                    <h2> <img class="rounded-circle account-img" src="{{ values.photo }}"
                             onError="this.onerror=null;this.src='/media/profile_image/default.jpg';" style="height: 50px;width: 50px"> {{ key }}</h2>

<div class="wrap kind-all-wrap" id="wrap">

  <div class="kindnessCardContainer kindnessCardAllContainer card--inner">
      <div class="kindness-bg"></div>
    <span style="
    text-align: left;
    float: left;
    clear: right;
    width: 100%;
    margin-left: 20px;
">Hi,</span>
      <ul style="padding-right: 25px;">
          <li>
            {% for v in values.messages  %}
                <!--<p>{{v}}</p>-->
               <p class="received-kindness"><span class="message-date">{{v.date}}</span>{{v.body}}</p>
            {% endfor %}

            <u><i><label for="option" style="z-index:1;width: auto;background: transparent;border: none;float: right;"><img class="rounded-circle account-img" src="{{ values.photo }}"
                             onError="this.onerror=null;this.src='/media/profile_image/default.jpg';" style="height: 35px;width: 35px;margin: 0;margin-right: 5px;">{{ key }}</label></i></u>
          </li>
  </ul>
  </div>
  <div class="kindnessCardContainer kindnessCardAllContainer  card--front back" onclick="openReadCard();"></div>
  <div class="kindnessCardContainer kindnessCardAllContainer  card--front" onclick="openReadCard();">
  </div>
</div>
         <button class="kdns-btn read-button" type="button" onclick="openReadCard();" id="read-button" style="text-align: center;margin: 0 auto;margin-top: 15px;">Open/Close Cards</button>
</div>

</div>

                  </article>
                </section>
            {% endfor %}
          </div>

</div>

<div class="container kindness" style="position:relative;padding: 0;">
    <a class=" btn all-cards btn-pink ">Show All My Cards</a>
    <div class="card-wrapper">
<div class="wrap kindness kind-wrap" id="kind">
  <div class="kindnessCardContainer card--inner">
      <div class="kindness-bg"></div>
    <span style="
    text-align: left;
    float: left;
    clear: right;
    width: 100%;
    margin-left: 20px;
">Hi,</span>
      <ul style="padding-right: 25px;">
    {% if unread.items %}
        {% for name, message in unread.items %}
          <li>
            {% for v in message %}
                <p>{{v}}</p>
            {% endfor %}
          
            <u><i><label style="
              text-align: right;
          ">{{ name }}</label></i></u>
          </li>
        {% endfor %}
    {% else %}
  </ul>
        <h6><i>You have no new messages</i></h6>
{#        <img src="/static/images/heart.png">#}
    {% endif %}

  </div>

  <div class="kindnessCardContainer card--front back" onclick="openCard();"></div>
  <div class="kindnessCardContainer card--front" onclick="openCard();">
  </div>
</div>
</div>
<form action="{% url 'mark_read' %}">
    <button type="button" onclick="openCard();" id="button" style="
    text-align: center;
    margin: 0 auto;
    margin-top: 15px;
">Open Card</button>
</form>
</div>

<script>
function openReadCard() {
$('.card--inner').slimScroll({
                height:'513px'
            });
//$(".kind-all-wrap").css('margin-left','33%');
$(".kind-all-wrap").toggleClass('move');

  var allReadbutton = document.getElementsByClassName('read-button');
  if(allReadbutton.innerHTML == 'Open/Close Cards') {
      allReadbutton.type = 'button';
      allReadbutton.innerHTML = 'Close All Cards';
  } else if(allReadbutton.innerHTML = 'Close All Cards') {
//$(".kind-all-wrap").css('margin-left','0');
      allReadbutton.innerHTML = 'Open All Cards';
  } else {
        allReadbutton.innerHTML = 'Open All Cards';
  }
  var Readcards = document.querySelectorAll('.kindnessCardAllContainer');
  for(var i = 0; i < Readcards.length; i++) {
    Readcards[i].classList.toggle('open');
  }
}
function openCard() {
$('.card--inner').slimScroll({
                height:'513px'
            });
$(".kind-wrap").css('margin-left','33%');
  var button = document.getElementById('button');
  if(button.innerHTML == 'Open Card') {
      button.type = 'button';
      button.innerHTML = 'Close Card';
  } else if(button.innerHTML = 'Close Card') {
$(".kind-wrap").css('margin-left','0');
      button.type = 'submit';
      button.innerHTML = 'Open Card';
  } else {
        button.innerHTML = 'Open Card';
  }
  var cards = document.querySelectorAll('.kindnessCardContainer');
  for(var i = 0; i < cards.length; i++) {
    cards[i].classList.toggle('open');
  }
}
</script>
{% endblock %}


