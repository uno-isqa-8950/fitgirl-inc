{% extends 'account/dashboard.html' %}
{% block dash_content %}
{% if request.user.is_superuser %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<div class="container-fluid">
  <div class="row">


<div class="col-12 col-sm-2 col-md-4 col-lg-12 offset-lg-0">
  
  <h1 class="text-center"> All Users</h1>
  
  <ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
  </ul>
<div>
  <table  id="dtDynamicVerticalScroll" class="table table-hover table-striped  table-bordered w-auto" class="target">
      <thead class="thead stylish-color text-white">
      <tr>
          <th class="th-lg"  style="
          font-weight: bold;
      " >Program<i class="fa fa-sort float-right" aria-hidden="true"></i></th>
          <th class="th-lg"  style="
          font-weight: bold;
      " >First Name <i class="fa fa-sort float-right" aria-hidden="true"></i></th>
			<th class="th-lg"  style="
            font-weight: bold;
        " >Last Name <i class="fa fa-sort float-right" aria-hidden="true"></i></th>
			<th class="th-lg"  style="
            font-weight: bold;
        ">Email <i class="fa fa-sort float-right" aria-hidden="true"></i></th>
          <th class="th-lg text-center"  style="
          font-weight: bold;
      ">Age<i class="fa fa-sort float-right" aria-hidden="true"></i></th>
      <th class="th-lg text-center"  style="
      font-weight: bold;
  ">Registered</th>
      <th class="th-lg text-center"  style="
      font-weight: bold;
  ">User Logged-In</th>
      <th class="th-lg text-center "  style="
      font-weight: bold;
  ">Pre-Assessment </th>
      <th class="th-lg text-center " style="
      font-weight: bold;
  ">Post-Assessment</th>
      <th class="th-lg text-center"  style="
      font-weight: bold;
  ">Points <i class="fa fa-sort float-right" aria-hidden="true"></i></th>
       <td id="addQuestionContent"  style="
       font-weight: bold;
   ">? </td>


 
          </thead>
 
        
          <tbody >
        {% for registeredUser in registeredUsers %}
        <tr class="hoverable">
        <td>{{ registeredUser.profile.program.program_name  }}</td>
        <td >{{ registeredUser.first_name }}</td>
            <td>{{ registeredUser.last_name }}</td>
			<td align="center" ><a href="{% url 'profile' registeredUser.id %}"><i class="fas fa-envelope fa-lg" style="color: darkblue" ></i></a></td>
            {% if registeredUser.profile.age is None %}
             <td align="center"></td>
            {% else %}
             <td align="center">{{ registeredUser.profile.age}}</td>
            {% endif %}

        {% if registeredUser.is_active %}
            <td align="center"><i class="fas fa-check fa-lg"style="color:#008000"></i></td>
        {% else %}
         <td align="center"><i class="fas fa-times fa-lg " style="color:#FF0000"></i></td>
        {% endif %}
        {% if registeredUser.last_login is None %}
           <td align="center" ><i class="fas fa-times fa-lg" style="color:#FF0000"></i></td>
        {% else %}
          <td align="center" ><i class="fas fa-check fa-lg " style="color:#008000"></i></td>
        {% endif %}
          {% if registeredUser.profile.pre_assessment == "No" %}
          <td align="center"><i class="fas fa-times fa-lg "style="color:#FF0000"></i></td>
        {% else %}
          <td align="center"><i class="fas fa-check fa-lg " style="color:#008000"></i></td>
        {% endif %}
            <td></td>
            {% if registeredUser.profile.points  == 0 %}
                <td></td>
            {% else %}

           <td align="center">{{ registeredUser.profile.points }}</td>
            {% endif %}

        {% endfor %}
        </tr>
        {% endif %}
        </tbody>
    </table>
</div>
  </div>

</div>
</div>
</div>


<script>

  $(document).ready(function () {
      $('#dtDynamicVerticalScroll').DataTable({
              "order": [[4, "YES"]],
               "scrollY": "80vh",
              "scrollCollapse": true,
              language: {
                  searchPlaceholder: "Search",
                  search: "",
              }
  });
  $('.dataTables_length').addClass('bs-select');
});

 var text="Active - User has been registered for the program"+"\n"+
 
 "User Logged in -User has created their profile on EMpoweru and changed their password "+"\n"

 +"Pre-assessment- User has completed their Pre-assessment"+ "\n"+

 "Points- User has accured these points ti date"
 
 
 ;
   

$(document).ready(function(){

   
    $("#addQuestionContent").attr("title",text)
    
    $("#image1").remove()
    $("#image2").remove()
    $("#image3").remove()
    $("#users").css("border","2px solid")
    $("#users").css("background-color","#ed217c")
    $("#users").css("color","#ffffff")
    $("#users").css("border-color","black")
 });


</script>
<style>
    .dataTables_wrapper .dataTables_length {
float: left;
}
.dataTables_wrapper .dataTables_filter {
float: right;
text-align: right;
}
</style>



{% endblock %}